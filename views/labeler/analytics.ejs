<%- include("../includes/head.ejs") %>
<link rel="stylesheet" href="/css/labeler.css">
<link rel="stylesheet" href="/css/analytics.css">
</head>
    <body>
        <header>
            <%- include("../includes/navigation.ejs") %>
        </header>
        <main>
            <div class="container">

            
            <div class="row">
              <%- include("../includes/side-nav.ejs") %>
                <div class=" main col-9 ">
                    <div class="info">
                        <div class="h2-con w-100">
                          <h2>Analytics</h2>
                        </div>
                      </div>
                      <div class="date">
                        <p><%= today %></p>
                      </div>
                      <div class="stats row">
                          <div class="daily col-5 crd">
                            <h3>Daily</h3>
                            <div class="nums row" >
                                <div class="tasksNum col-6"><p>number of tasks: </p><span><%= dailyTasks.length %></span></div>
                                <div class="tasksNum col-6" ><p>number of Objects: </p><span><%= dailyTasks.reduce((acc, cur) => acc += (cur.SubmittednumObj - cur.StartednumObj) , 0) %></span></div>
                            </div>
                                <div class="progress " role="progressbar" aria-label="Example with label" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                                    <div class="progress-bar" style="width:<%= (dailyTasks.reduce((acc, cur) => acc += (cur.SubmittednumObj - cur.StartednumObj) , 0) / 1000 * 100) %>%"><%= (dailyTasks.reduce((acc, cur) => acc += (cur.SubmittednumObj - cur.StartednumObj) , 0) / 1000 * 100) %> %</div>
                                </div>
                                <div class="queue">
                                    <% if (dailyTasksbyQueue){ %>
                                    <p>by Queue: </p>
                                    <% Object.entries(dailyTasksbyQueue).forEach(t => { %>
                                      <p><%= t[0] %>: <span><%= t[1] %></span></p>
                                    <% }) %>
                                    <%} %>
                                </div>
                          </div>
                          <div class="Weekly col-5 crd"><h3>Weekly</h3>
                            <div class="nums row" >
                                <div class="tasksNum col-6"><p>number of tasks: </p><span><%= weeklyTasks.length %></span></div>
                                <div class="tasksNum col-6" ><p>number of Objects: </p><span><%= weeklyTasks.reduce((acc, cur) => acc += (cur.SubmittednumObj - cur.StartednumObj) , 0) %></span></div>
                            </div>
                                <div class="progress " role="progressbar" aria-label="Example with label" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                                    <div class="progress-bar" style="width:<%= (dailyTasks.reduce((acc, cur) => acc += (cur.SubmittednumObj - cur.StartednumObj) , 0) / 1000 / 6 * 100) %>%"><%= (dailyTasks.reduce((acc, cur) => acc += (cur.SubmittednumObj - cur.StartednumObj) , 0) / 1000  / 6 *100) %> %</div>
                                </div>
                                <div class="queue">
                                    <% if (weeklyTasksbyQueue){ %>
                                    <p>by Queue: </p>
                                    <% Object.entries(weeklyTasksbyQueue).forEach(t => { %>
                                      <p><%= t[0] %>: <span><%= t[1] %></span></p>
                                    <% }) %>
                                    <%} %>
                                </div></div>
                          <div class="Monthly col-11 crd"><h3>Monthly</h3>
                            <div class="nums row" >
                                <div class="tasksNum col-6"><p>number of tasks: </p><span><%= MonthlyTasks.length %></span></div>
                                <div class="tasksNum col-6" ><p>number of Objects: </p><span><%= MonthlyTasks.reduce((acc, cur) => acc += (cur.SubmittednumObj - cur.StartednumObj) , 0) %></span></div>
                            </div>
                                <div class="progress " role="progressbar" aria-label="Example with label" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                                    <div class="progress-bar" style="width:<%= (dailyTasks.reduce((acc, cur) => acc += (cur.SubmittednumObj - cur.StartednumObj) , 0) / 1000 / 26 * 100) %>%"><%= (dailyTasks.reduce((acc, cur) => acc += (cur.SubmittednumObj - cur.StartednumObj) , 0) / 1000 / 26* 100) %> %</div>
                                </div>
                                <div class="queue">
                                    <% if (MonthlyTasksByQueue){ %>
                                    <p>by Queue: </p>
                                    <% Object.entries(MonthlyTasksByQueue).forEach(t => { %>
                                      <p><%= t[0] %>: <span><%= t[1] %></span></p>
                                    <% }) %>
                                    <%} %>
                                </div></div>
                    </div>
                </div>
            </div>
        </div>
        </main>
    </body>
<%- include("../includes/end.ejs") %>